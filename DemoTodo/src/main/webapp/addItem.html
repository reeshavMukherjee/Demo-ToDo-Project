<!DOCTYPE html>
<html>

  <head>
  
    <script  src="https://code.jquery.com/jquery-3.2.1.js"
      integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="  crossorigin="anonymous">
    </script>

  </head>

 	<body>
			<h1>
		    <marquee bgcolor=orange behavior=alternate> TODO Application</marquee>
		   </h1>
		
		
		  <fieldset>
			    <legend>Add TODO Item:</legend>
			    Todo Item Name:<input type="text" id="name" ><br>
			    Description:<input type="text" id="desc" ><br><br>
			    <button onclick="addTODO()">Save TODO</button>
		  </fieldset>
		  
			
			<script type="text/javascript">
			function addTODO(){
				var name = document.getElementById('name').value;
		    	var desc = document.getElementById('desc').value;
		    	
		    	var date = new Date();
		    	var dd = String(date.getDate()).padStart(2, '0');
		    	var mm = String(date.getMonth() + 1).padStart(2, '0'); //January is 0!
		    	var yyyy = date.getFullYear();
		    	var HH = date.getHours();
		    	var MM = date.getMinutes();

		    	date = dd + '-' + mm + '-' + yyyy + ' ' + HH + ':' +MM;
 		    	//document.write(date);
		    	var sendInfo = {"name":name, "desc":desc, "date":date}
 
		    	$.ajax({
		            type: 'post',
		            url: 'http://localhost:8004/todos',
		            data: JSON.stringify(sendInfo),
		            contentType: "application/json; charset=utf-8",
		            traditional: true,
		            success: function (data) {
		                alert('TODO added!!!');
		                window.onunload = refreshParent;
		                window.close();
		            }
		            
		        });
		    	
			}
			
			
			function refreshParent() {
			        window.opener.location.reload();
			    }
			
			</script>
		

	

	</body>
 </html>